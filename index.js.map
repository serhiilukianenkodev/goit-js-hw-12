{"version":3,"file":"index.js","sources":["../src/js/pixabey-api.js","../src/js/render-functions.js","../src/js/helpers/loader.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '29142435-196ab0ea47673651fa34d9a29';\nconst baseURL = 'https://pixabay.com/api/';\n\n// 'https://pixabay.com/api/?key=29142435-196ab0ea47673651fa34d9a29&q=yellow+flowers&image_type=photo&pretty=true';\n\n// export function getPhotos(query) {\n//   const params = {\n//     key: API_KEY,\n//     q: query,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//   };\n\n//   return axios.get(baseURL, { params });\n// }\n\nexport class FetchImages {\n  constructor() {\n    this.baseURL = 'https://pixabay.com/api/';\n    this.API_KEY = '29142435-196ab0ea47673651fa34d9a29';\n    this.page = 1;\n    this.perPage = 40;\n    this.query = '';\n  }\n\n  setQuery(newQuery) {\n    this.query = newQuery;\n    this.page = 1;\n  }\n\n  setNextPage() {\n    this.page += 1;\n  }\n\n  async getData() {\n    const params = {\n      key: this.API_KEY,\n      q: this.query,\n      per_page: this.perPage,\n      page: this.page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    };\n\n    const res = await axios.get(this.baseURL, { params });\n    const data = await res.data;\n    return data;\n  }\n}\n","export function createGallery(list) {\n  return list.map(item => createCard(item)).join('');\n}\n\nfunction createCard(item) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = item;\n  return `        \n        <li class = \"gallery-card\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\" class = \"card-img\" />\n            <ul class = \"card-stats\">\n              <li class = \"card-stat\">\n                <p>Likes</p>\n                <span>${likes}</span>\n              </li>\n              <li class = \"card-stat\">\n                <p>Views</p>\n                <span>${views}</span>\n                </li>\n              <li class = \"card-stat\">\n                <p>Comments</p>\n                <span>${comments}</span>\n              </li>\n              <li class = \"card-stat\">\n                <p>Downloads</p>\n                <span>${downloads}</span>\n              </li>\n            </ul>\n          </a>\n        </li>`;\n}\n","const loader = document.querySelector('.loader');\n\nexport function showLoader() {\n  loader.classList.remove('hide');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hide');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { FetchImages } from './js/pixabey-api';\nimport { createGallery } from './js/render-functions';\nimport { hideLoader, showLoader } from './js/helpers/loader';\n\nconst refs = {\n  form: document.querySelector('.js-form'),\n  galleryList: document.querySelector('.js-gallery'),\n  loadMoreBtn: document.querySelector('.js-load-more'),\n};\n\nrefs.form.addEventListener('submit', onSearchFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nconst options = {\n  captionSelector: 'img',\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n\nconst fetchImages = new FetchImages();\nconst gallery = new SimpleLightbox('.gallery a', options);\n\nasync function onSearchFormSubmit(e) {\n  e.preventDefault();\n\n  const query = e.target.elements.query.value.trim();\n  const isQueryEmpty = !query;\n  if (isQueryEmpty)\n    return iziToast.warning({\n      position: 'center',\n      message: 'Your query is empty',\n    });\n\n  refs.galleryList.innerHTML = '';\n  showLoader();\n  //\n\n  try {\n    fetchImages.setQuery(query);\n    const data = await fetchImages.getData();\n    // const canLoadMore = data\n\n    console.log(data);\n\n    if (data.hits.length === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n\n    const items = await data.hits;\n    refs.galleryList.innerHTML = createGallery(items);\n    gallery.refresh();\n  } catch ({ message }) {\n    iziToast.error({\n      position: 'center',\n      messageColor: 'red',\n      message: message,\n      iconUrl: './img/toast-icon.svg',\n    });\n  }\n\n  hideLoader();\n\n  //\n\n  // getPhotos(query)\n  //   .then(({ data }) => {\n  //     if (data.hits.length === 0) {\n  //       throw new Error(\n  //         'Sorry, there are no images matching your search query. Please try again!'\n  //       );\n  //     }\n\n  //     return data.hits;\n  //   })\n  //   .then(items => {\n  //     refs.galleryList.innerHTML = createGallery(items);\n  //     gallery.refresh();\n  //   })\n  //   .catch(({ message }) => {\n  //     iziToast.error({\n  //       position: 'center',\n  //       messageColor: 'red',\n  //       message: message,\n  //     });\n  //   })\n  //   .finally(() => hideLoader());\n\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  fetchImages.setNextPage();\n\n  showLoader();\n  // hide btn\n\n  try {\n    const data = await fetchImages.getData();\n    // const canLoadMore = data\n\n    console.log(data);\n\n    // if (data.hits.length === 0) {\n    //   throw new Error(\n    //     'Sorry, there are no images matching your search query. Please try again!'\n    //   );\n    // }\n\n    const items = await data.hits;\n    refs.galleryList.insertAdjacentHTML('beforeend', createGallery(items));\n    gallery.refresh();\n  } catch ({ message }) {\n    iziToast.error({\n      position: 'center',\n      messageColor: 'red',\n      message: message,\n      iconUrl: './img/toast-icon.svg',\n    });\n  }\n\n  hideLoader();\n}\n"],"names":["FetchImages","newQuery","params","axios","createGallery","list","item","createCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loader","showLoader","hideLoader","refs","onSearchFormSubmit","onLoadMoreClick","options","fetchImages","gallery","SimpleLightbox","e","query","iziToast","data","items","message"],"mappings":"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"}